version: '1.0'
image: jetbrains/qodana-js:2025.2
profile:
  name: qodana.recommended
bootstrap: |
  export SHELL=/bin/bash
  curl -fsSL https://get.pnpm.io/install.sh | SHELL=/bin/bash sh -
  export PATH="$HOME/.local/share/pnpm:$PATH"
  pnpm install --frozen-lockfile
  mkdir -p .qodana/code-coverage
  test -f coverage/lcov.info && cp coverage/lcov.info .qodana/code-coverage/ || echo "No coverage/lcov.info found"
  test -f lcov.info && cp lcov.info .qodana/code-coverage/ || echo "No root lcov.info found"
  echo "Generating fresh coverage..."
  pnpm test:coverage --passWithNoTests || echo "Coverage generation completed"
properties:
  qodana.cache.enabled: false
include:
  - name: Eslint
  - name: JsCoverageInspection
  - name: CheckDependencyLicenses
exclude:
  - name: NodeRequiredDependencies
  - name: NpmUsedModulesInstalled
  - name: All
    paths:
      - .next
      - node_modules
      - out
      - dist
      - build
      - .qodana
      - lcov-report
      - coverage
      - "**/*.html"
      - "**/*.min.js"
